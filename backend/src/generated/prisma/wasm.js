
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */

Object.defineProperty(exports, "__esModule", { value: true });

const {
  PrismaClientKnownRequestError,
  PrismaClientUnknownRequestError,
  PrismaClientRustPanicError,
  PrismaClientInitializationError,
  PrismaClientValidationError,
  getPrismaClient,
  sqltag,
  empty,
  join,
  raw,
  skip,
  Decimal,
  Debug,
  objectEnumValues,
  makeStrictEnum,
  Extensions,
  warnOnce,
  defineDmmfProperty,
  Public,
  getRuntime,
  createParam,
} = require('./runtime/wasm-engine-edge.js')


const Prisma = {}

exports.Prisma = Prisma
exports.$Enums = {}

/**
 * Prisma Client JS version: 6.18.0
 * Query Engine version: 34b5a692b7bd79939a9a2c3ef97d816e749cda2f
 */
Prisma.prismaVersion = {
  client: "6.18.0",
  engine: "34b5a692b7bd79939a9a2c3ef97d816e749cda2f"
}

Prisma.PrismaClientKnownRequestError = PrismaClientKnownRequestError;
Prisma.PrismaClientUnknownRequestError = PrismaClientUnknownRequestError
Prisma.PrismaClientRustPanicError = PrismaClientRustPanicError
Prisma.PrismaClientInitializationError = PrismaClientInitializationError
Prisma.PrismaClientValidationError = PrismaClientValidationError
Prisma.Decimal = Decimal

/**
 * Re-export of sql-template-tag
 */
Prisma.sql = sqltag
Prisma.empty = empty
Prisma.join = join
Prisma.raw = raw
Prisma.validator = Public.validator

/**
* Extensions
*/
Prisma.getExtensionContext = Extensions.getExtensionContext
Prisma.defineExtension = Extensions.defineExtension

/**
 * Shorthand utilities for JSON filtering
 */
Prisma.DbNull = objectEnumValues.instances.DbNull
Prisma.JsonNull = objectEnumValues.instances.JsonNull
Prisma.AnyNull = objectEnumValues.instances.AnyNull

Prisma.NullTypes = {
  DbNull: objectEnumValues.classes.DbNull,
  JsonNull: objectEnumValues.classes.JsonNull,
  AnyNull: objectEnumValues.classes.AnyNull
}





/**
 * Enums
 */
exports.Prisma.TransactionIsolationLevel = makeStrictEnum({
  ReadUncommitted: 'ReadUncommitted',
  ReadCommitted: 'ReadCommitted',
  RepeatableRead: 'RepeatableRead',
  Serializable: 'Serializable'
});

exports.Prisma.UserScalarFieldEnum = {
  id: 'id',
  provider: 'provider',
  providerAccountId: 'providerAccountId',
  username: 'username',
  email: 'email',
  displayName: 'displayName',
  fullName: 'fullName',
  avatarUrl: 'avatarUrl',
  avatarSource: 'avatarSource',
  avatarUpdatedAt: 'avatarUpdatedAt',
  birthDate: 'birthDate',
  gender: 'gender',
  preferredLanguage: 'preferredLanguage',
  role: 'role',
  lastLoginAt: 'lastLoginAt',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt',
  maxAgeRating: 'maxAgeRating',
  blockedTags: 'blockedTags'
};

exports.Prisma.ContentClassificationScalarFieldEnum = {
  id: 'id',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  reason: 'reason',
  contentType: 'contentType',
  contentId: 'contentId',
  autoClassified: 'autoClassified',
  reviewedBy: 'reviewedBy',
  reviewedAt: 'reviewedAt',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.LoraScalarFieldEnum = {
  id: 'id',
  civitaiModelId: 'civitaiModelId',
  civitaiVersionId: 'civitaiVersionId',
  name: 'name',
  modelType: 'modelType',
  baseModel: 'baseModel',
  downloadCount: 'downloadCount',
  modelUrl: 'modelUrl',
  tags: 'tags',
  trainedWords: 'trainedWords',
  nsfw: 'nsfw',
  filename: 'filename',
  filepathRelative: 'filepathRelative',
  firstImageUrl: 'firstImageUrl',
  imageUrls: 'imageUrls',
  category: 'category',
  term: 'term',
  deleted: 'deleted',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.AttireScalarFieldEnum = {
  id: 'id',
  name: 'name',
  description: 'description',
  gender: 'gender',
  promptHead: 'promptHead',
  promptBody: 'promptBody',
  promptFull: 'promptFull',
  previewImageUrl: 'previewImageUrl',
  originalLanguageCode: 'originalLanguageCode',
  visibility: 'visibility',
  userId: 'userId',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  contentVersion: 'contentVersion',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.TagScalarFieldEnum = {
  id: 'id',
  name: 'name',
  description: 'description',
  type: 'type',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  originalLanguageCode: 'originalLanguageCode',
  weight: 'weight',
  searchable: 'searchable',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.CharacterScalarFieldEnum = {
  id: 'id',
  firstName: 'firstName',
  lastName: 'lastName',
  age: 'age',
  gender: 'gender',
  species: 'species',
  style: 'style',
  reference: 'reference',
  physicalCharacteristics: 'physicalCharacteristics',
  personality: 'personality',
  history: 'history',
  visibility: 'visibility',
  isSystemCharacter: 'isSystemCharacter',
  originalLanguageCode: 'originalLanguageCode',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  userId: 'userId',
  loraId: 'loraId',
  mainAttireId: 'mainAttireId',
  contentVersion: 'contentVersion',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.CharacterStickerScalarFieldEnum = {
  id: 'id',
  characterId: 'characterId',
  emotionTag: 'emotionTag',
  actionTag: 'actionTag',
  imageUrl: 'imageUrl',
  promptUsed: 'promptUsed',
  status: 'status',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.CharacterImageScalarFieldEnum = {
  id: 'id',
  characterId: 'characterId',
  type: 'type',
  url: 'url',
  key: 'key',
  width: 'width',
  height: 'height',
  sizeBytes: 'sizeBytes',
  contentType: 'contentType',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  description: 'description',
  isActive: 'isActive',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.StoryScalarFieldEnum = {
  id: 'id',
  title: 'title',
  synopsis: 'synopsis',
  initialText: 'initialText',
  coverImage: 'coverImage',
  objectives: 'objectives',
  authorId: 'authorId',
  ageRating: 'ageRating',
  contentTags: 'contentTags',
  visibility: 'visibility',
  contentVersion: 'contentVersion',
  originalLanguageCode: 'originalLanguageCode',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.AssistantScalarFieldEnum = {
  id: 'id',
  name: 'name',
  description: 'description',
  instructions: 'instructions',
  defaultCharacterId: 'defaultCharacterId',
  visibility: 'visibility',
  userId: 'userId',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.ConversationScalarFieldEnum = {
  id: 'id',
  title: 'title',
  isTitleUserEdited: 'isTitleUserEdited',
  isTitleSystemEdited: 'isTitleSystemEdited',
  projectId: 'projectId',
  storyId: 'storyId',
  settings: 'settings',
  lastMessageAt: 'lastMessageAt',
  titleLastUpdatedAt: 'titleLastUpdatedAt',
  memoryLastUpdatedAt: 'memoryLastUpdatedAt',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt',
  userId: 'userId',
  isMultiUser: 'isMultiUser',
  maxUsers: 'maxUsers',
  ownerUserId: 'ownerUserId',
  allowUserInvites: 'allowUserInvites',
  requireApproval: 'requireApproval'
};

exports.Prisma.UserConversationMembershipScalarFieldEnum = {
  id: 'id',
  conversationId: 'conversationId',
  userId: 'userId',
  role: 'role',
  canWrite: 'canWrite',
  canInvite: 'canInvite',
  canModerate: 'canModerate',
  joinedAt: 'joinedAt',
  invitedBy: 'invitedBy',
  isActive: 'isActive'
};

exports.Prisma.ConversationParticipantScalarFieldEnum = {
  id: 'id',
  conversationId: 'conversationId',
  userId: 'userId',
  actingCharacterId: 'actingCharacterId',
  actingAssistantId: 'actingAssistantId',
  representingCharacterId: 'representingCharacterId',
  configOverride: 'configOverride',
  joinedAt: 'joinedAt'
};

exports.Prisma.MessageScalarFieldEnum = {
  id: 'id',
  conversationId: 'conversationId',
  senderId: 'senderId',
  senderType: 'senderType',
  content: 'content',
  attachments: 'attachments',
  metadata: 'metadata',
  timestamp: 'timestamp'
};

exports.Prisma.FavoriteCharacterScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  characterId: 'characterId',
  createdAt: 'createdAt'
};

exports.Prisma.ContentTranslationScalarFieldEnum = {
  id: 'id',
  contentType: 'contentType',
  contentId: 'contentId',
  fieldName: 'fieldName',
  originalLanguageCode: 'originalLanguageCode',
  targetLanguageCode: 'targetLanguageCode',
  originalText: 'originalText',
  translatedText: 'translatedText',
  translationProvider: 'translationProvider',
  translationModel: 'translationModel',
  confidence: 'confidence',
  status: 'status',
  reviewedBy: 'reviewedBy',
  reviewedAt: 'reviewedAt',
  translationTimeMs: 'translationTimeMs',
  characterCount: 'characterCount',
  sourceVersion: 'sourceVersion',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.ConversationMemoryScalarFieldEnum = {
  id: 'id',
  conversationId: 'conversationId',
  summary: 'summary',
  keyEvents: 'keyEvents',
  messageCount: 'messageCount',
  startMessageId: 'startMessageId',
  endMessageId: 'endMessageId',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.CreditTransactionScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  transactionType: 'transactionType',
  amountCredits: 'amountCredits',
  balanceAfter: 'balanceAfter',
  notes: 'notes',
  relatedUsageLogId: 'relatedUsageLogId',
  relatedPlanId: 'relatedPlanId',
  timestamp: 'timestamp'
};

exports.Prisma.PlanScalarFieldEnum = {
  id: 'id',
  tier: 'tier',
  name: 'name',
  priceMonthly: 'priceMonthly',
  creditsPerMonth: 'creditsPerMonth',
  description: 'description',
  features: 'features',
  isActive: 'isActive',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt',
  paypalPlanId: 'paypalPlanId'
};

exports.Prisma.ServiceCreditCostScalarFieldEnum = {
  id: 'id',
  serviceIdentifier: 'serviceIdentifier',
  creditsPerUnit: 'creditsPerUnit',
  unitDescription: 'unitDescription',
  isActive: 'isActive',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.UsageLogScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  conversationId: 'conversationId',
  serviceType: 'serviceType',
  providerName: 'providerName',
  modelName: 'modelName',
  inputTokens: 'inputTokens',
  outputTokens: 'outputTokens',
  charactersProcessed: 'charactersProcessed',
  imagesProcessed: 'imagesProcessed',
  costUsd: 'costUsd',
  creditsConsumed: 'creditsConsumed',
  additionalMetadata: 'additionalMetadata',
  processed: 'processed',
  processedAt: 'processedAt',
  timestamp: 'timestamp'
};

exports.Prisma.UserMonthlyBalanceScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  monthStartDate: 'monthStartDate',
  startingBalance: 'startingBalance',
  creditsGranted: 'creditsGranted',
  creditsSpent: 'creditsSpent',
  endingBalance: 'endingBalance',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.UserPlanScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  planId: 'planId',
  status: 'status',
  currentPeriodStart: 'currentPeriodStart',
  currentPeriodEnd: 'currentPeriodEnd',
  cancelAtPeriodEnd: 'cancelAtPeriodEnd',
  canceledAt: 'canceledAt',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt',
  lastCreditsGrantedAt: 'lastCreditsGrantedAt',
  paypalSubscriptionId: 'paypalSubscriptionId'
};

exports.Prisma.UserPlusAccessScalarFieldEnum = {
  id: 'id',
  userId: 'userId',
  grantedBy: 'grantedBy',
  reason: 'reason',
  startDate: 'startDate',
  endDate: 'endDate',
  isActive: 'isActive',
  createdAt: 'createdAt',
  updatedAt: 'updatedAt'
};

exports.Prisma.SortOrder = {
  asc: 'asc',
  desc: 'desc'
};

exports.Prisma.NullableJsonNullValueInput = {
  DbNull: Prisma.DbNull,
  JsonNull: Prisma.JsonNull
};

exports.Prisma.JsonNullValueInput = {
  JsonNull: Prisma.JsonNull
};

exports.Prisma.QueryMode = {
  default: 'default',
  insensitive: 'insensitive'
};

exports.Prisma.NullsOrder = {
  first: 'first',
  last: 'last'
};

exports.Prisma.JsonNullValueFilter = {
  DbNull: Prisma.DbNull,
  JsonNull: Prisma.JsonNull,
  AnyNull: Prisma.AnyNull
};
exports.AuthProvider = exports.$Enums.AuthProvider = {
  GOOGLE: 'GOOGLE',
  FACEBOOK: 'FACEBOOK'
};

exports.UserRole = exports.$Enums.UserRole = {
  BASIC: 'BASIC',
  PREMIUM: 'PREMIUM',
  ADMIN: 'ADMIN'
};

exports.AgeRating = exports.$Enums.AgeRating = {
  L: 'L',
  TEN: 'TEN',
  TWELVE: 'TWELVE',
  FOURTEEN: 'FOURTEEN',
  SIXTEEN: 'SIXTEEN',
  EIGHTEEN: 'EIGHTEEN'
};

exports.ContentTag = exports.$Enums.ContentTag = {
  VIOLENCE: 'VIOLENCE',
  GORE: 'GORE',
  SEXUAL: 'SEXUAL',
  NUDITY: 'NUDITY',
  LANGUAGE: 'LANGUAGE',
  DRUGS: 'DRUGS',
  ALCOHOL: 'ALCOHOL',
  HORROR: 'HORROR',
  PSYCHOLOGICAL: 'PSYCHOLOGICAL',
  DISCRIMINATION: 'DISCRIMINATION',
  CRIME: 'CRIME',
  GAMBLING: 'GAMBLING'
};

exports.Visibility = exports.$Enums.Visibility = {
  PRIVATE: 'PRIVATE',
  UNLISTED: 'UNLISTED',
  PUBLIC: 'PUBLIC'
};

exports.VisualStyle = exports.$Enums.VisualStyle = {
  ANIME: 'ANIME',
  REALISTIC: 'REALISTIC',
  SEMI_REALISTIC: 'SEMI_REALISTIC',
  CARTOON: 'CARTOON',
  MANGA: 'MANGA',
  MANHWA: 'MANHWA',
  COMIC: 'COMIC',
  CHIBI: 'CHIBI',
  PIXEL_ART: 'PIXEL_ART',
  THREE_D: 'THREE_D'
};

exports.AvatarSource = exports.$Enums.AvatarSource = {
  PROVIDER: 'PROVIDER',
  UPLOADED: 'UPLOADED'
};

exports.StickerStatus = exports.$Enums.StickerStatus = {
  PENDING: 'PENDING',
  GENERATING: 'GENERATING',
  COMPLETED: 'COMPLETED',
  FAILED: 'FAILED'
};

exports.ImageType = exports.$Enums.ImageType = {
  AVATAR: 'AVATAR',
  COVER: 'COVER',
  SAMPLE: 'SAMPLE',
  STICKER: 'STICKER',
  OTHER: 'OTHER'
};

exports.TagType = exports.$Enums.TagType = {
  CHARACTER: 'CHARACTER',
  STORY: 'STORY',
  ASSET: 'ASSET',
  GAME: 'GAME',
  MEDIA: 'MEDIA',
  GENERAL: 'GENERAL'
};

exports.SenderType = exports.$Enums.SenderType = {
  USER: 'USER',
  CHARACTER: 'CHARACTER',
  ASSISTANT: 'ASSISTANT',
  SYSTEM: 'SYSTEM'
};

exports.MembershipRole = exports.$Enums.MembershipRole = {
  OWNER: 'OWNER',
  MODERATOR: 'MODERATOR',
  MEMBER: 'MEMBER',
  VIEWER: 'VIEWER'
};

exports.TranslationStatus = exports.$Enums.TranslationStatus = {
  PENDING: 'PENDING',
  ACTIVE: 'ACTIVE',
  OUTDATED: 'OUTDATED',
  FAILED: 'FAILED',
  REVIEWED: 'REVIEWED'
};

exports.CreditTransactionType = exports.$Enums.CreditTransactionType = {
  GRANT_INITIAL: 'GRANT_INITIAL',
  GRANT_PLAN: 'GRANT_PLAN',
  PURCHASE: 'PURCHASE',
  CONSUMPTION: 'CONSUMPTION',
  SYSTEM_REWARD: 'SYSTEM_REWARD',
  REFUND: 'REFUND',
  ADJUSTMENT: 'ADJUSTMENT',
  REFERRAL_BONUS: 'REFERRAL_BONUS',
  PROMOTIONAL: 'PROMOTIONAL'
};

exports.PlanTier = exports.$Enums.PlanTier = {
  FREE: 'FREE',
  PLUS: 'PLUS',
  PREMIUM: 'PREMIUM'
};

exports.SubscriptionStatus = exports.$Enums.SubscriptionStatus = {
  ACTIVE: 'ACTIVE',
  CANCELLED: 'CANCELLED',
  EXPIRED: 'EXPIRED',
  PAYMENT_FAILED: 'PAYMENT_FAILED'
};

exports.Prisma.ModelName = {
  User: 'User',
  ContentClassification: 'ContentClassification',
  Lora: 'Lora',
  Attire: 'Attire',
  Tag: 'Tag',
  Character: 'Character',
  CharacterSticker: 'CharacterSticker',
  CharacterImage: 'CharacterImage',
  Story: 'Story',
  Assistant: 'Assistant',
  Conversation: 'Conversation',
  UserConversationMembership: 'UserConversationMembership',
  ConversationParticipant: 'ConversationParticipant',
  Message: 'Message',
  FavoriteCharacter: 'FavoriteCharacter',
  ContentTranslation: 'ContentTranslation',
  ConversationMemory: 'ConversationMemory',
  CreditTransaction: 'CreditTransaction',
  Plan: 'Plan',
  ServiceCreditCost: 'ServiceCreditCost',
  UsageLog: 'UsageLog',
  UserMonthlyBalance: 'UserMonthlyBalance',
  UserPlan: 'UserPlan',
  UserPlusAccess: 'UserPlusAccess'
};
/**
 * Create the Client
 */
const config = {
  "generator": {
    "name": "client",
    "provider": {
      "fromEnvVar": null,
      "value": "prisma-client-js"
    },
    "output": {
      "value": "/root/projects/charhub-reviewer/backend/src/generated/prisma",
      "fromEnvVar": null
    },
    "config": {
      "engineType": "library"
    },
    "binaryTargets": [
      {
        "fromEnvVar": null,
        "value": "debian-openssl-3.0.x"
      }
    ],
    "previewFeatures": [],
    "sourceFilePath": "/root/projects/charhub-reviewer/backend/prisma/schema.prisma",
    "isCustomOutput": true
  },
  "relativeEnvPaths": {
    "rootEnvPath": null
  },
  "relativePath": "../../../prisma",
  "clientVersion": "6.18.0",
  "engineVersion": "34b5a692b7bd79939a9a2c3ef97d816e749cda2f",
  "datasourceNames": [
    "db"
  ],
  "activeProvider": "postgresql",
  "postinstall": false,
  "inlineDatasources": {
    "db": {
      "url": {
        "fromEnvVar": "DATABASE_URL",
        "value": null
      }
    }
  },
  "inlineSchema": "generator client {\n  provider      = \"prisma-client-js\"\n  output        = \"../src/generated/prisma\"\n  binaryTargets = [\"debian-openssl-3.0.x\"]\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n\nenum AuthProvider {\n  GOOGLE\n  FACEBOOK\n}\n\nenum UserRole {\n  BASIC\n  PREMIUM\n  ADMIN\n}\n\n// Age-based content rating system (similar to movie/anime ratings)\nenum AgeRating {\n  L // Livre (All ages) - General audiences\n  TEN // 10+ - Mild themes\n  TWELVE // 12+ - Moderate themes\n  FOURTEEN // 14+ - More mature themes, mild sexual references\n  SIXTEEN // 16+ - Strong themes, explicit language, moderate violence\n  EIGHTEEN // 18+ - Adult content, explicit violence/sexual content\n}\n\n// Content warning tags (can be combined with age rating)\nenum ContentTag {\n  VIOLENCE // Physical violence, fighting\n  GORE // Explicit violence, blood, injuries\n  SEXUAL // Sexual content, innuendo\n  NUDITY // Nudity or partial nudity\n  LANGUAGE // Strong language, profanity\n  DRUGS // Drug use or references\n  ALCOHOL // Alcohol consumption\n  HORROR // Horror themes, disturbing content\n  PSYCHOLOGICAL // Psychological themes, mental health\n  DISCRIMINATION // Discriminatory content, hate speech\n  CRIME // Criminal activities\n  GAMBLING // Gambling themes\n}\n\n// Visibility levels for user-generated content\nenum Visibility {\n  PRIVATE // Only owner can see\n  UNLISTED // Anyone with the link can see\n  PUBLIC // Everyone can see and search\n}\n\n// Visual style options for characters\nenum VisualStyle {\n  ANIME // Japanese anime style (default)\n  REALISTIC // Realistic/photorealistic style\n  SEMI_REALISTIC // Semi-realistic art style\n  CARTOON // Western cartoon style\n  MANGA // Japanese manga/comic style\n  MANHWA // Korean manhwa/webtoon style\n  COMIC // Western comic book style\n  CHIBI // Super deformed/cute style\n  PIXEL_ART // Pixel art/retro game style\n  THREE_D // 3D rendered style\n}\n\nmodel User {\n  id                String       @id @default(uuid())\n  provider          AuthProvider\n  providerAccountId String\n  username          String?      @unique\n  email             String?      @unique\n  displayName       String?\n  fullName          String?\n  avatarUrl         String?\n  avatarSource      AvatarSource @default(PROVIDER)\n  avatarUpdatedAt   DateTime?\n  birthDate         DateTime?\n  gender            String?\n  preferredLanguage String?      @default(\"en\") // User's preferred language for AI responses (ISO 639-1 code)\n  role              UserRole     @default(BASIC)\n  lastLoginAt       DateTime     @default(now())\n  createdAt         DateTime     @default(now())\n  updatedAt         DateTime     @updatedAt\n\n  // Content filtering preferences\n  maxAgeRating AgeRating    @default(EIGHTEEN) // Maximum age rating user wants to see\n  blockedTags  ContentTag[] // Content tags the user wants to block\n\n  // Relations\n  createdCharacters Character[] @relation(\"CharacterCreator\")\n  stories           Story[]     @relation(\"StoryAuthor\")\n  createdAttires    Attire[]    @relation(\"AttireCreator\")\n\n  // Chat system relations\n  assistants                 Assistant[]               @relation(\"UserAssistants\")\n  conversations              Conversation[]            @relation(\"UserConversations\")\n  conversationParticipations ConversationParticipant[] @relation(\"UserParticipations\")\n\n  // Multi-user chat relations\n  ownedConversations Conversation[]               @relation(\"ConversationOwner\")\n  memberships        UserConversationMembership[] @relation(\"ConversationMemberships\")\n  sentInvites        UserConversationMembership[] @relation(\"SentInvites\")\n\n  // Favorites\n  favoriteCharacters FavoriteCharacter[] @relation(\"UserFavoriteCharacters\")\n\n  // Credit and subscription relations\n  creditTransactions CreditTransaction[]  @relation(\"UserCreditTransactions\")\n  usageLogs          UsageLog[]           @relation(\"UserUsageLogs\")\n  monthlyBalances    UserMonthlyBalance[] @relation(\"UserMonthlyBalances\")\n  userPlans          UserPlan[]           @relation(\"UserSubscriptionPlans\")\n  plusAccessGrants   UserPlusAccess[]     @relation(\"UserPlusAccessGrants\")\n\n  @@unique([provider, providerAccountId])\n}\n\nenum AvatarSource {\n  PROVIDER\n  UPLOADED\n}\n\n// Generic content classification model (can be used for any content type)\nmodel ContentClassification {\n  id          String       @id @default(uuid())\n  ageRating   AgeRating\n  contentTags ContentTag[]\n  reason      String? // Optional: explanation for the rating\n\n  // Polymorphic relations (contentType + contentId pattern)\n  contentType String // e.g., \"Character\", \"Story\", \"Image\", \"Conversation\"\n  contentId   String // ID of the content being classified\n\n  // Moderation info\n  autoClassified Boolean   @default(true) // Was it auto-classified or manually reviewed?\n  reviewedBy     String? // User ID of moderator who reviewed (if manual)\n  reviewedAt     DateTime? // When it was reviewed\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@unique([contentType, contentId]) // One classification per content item\n  @@index([ageRating])\n  @@index([contentType])\n}\n\n// Sticker generation status\nenum StickerStatus {\n  PENDING\n  GENERATING\n  COMPLETED\n  FAILED\n}\n\n// Types of images associated with a character\nenum ImageType {\n  AVATAR\n  COVER\n  SAMPLE\n  STICKER\n  OTHER\n}\n\n// Tag type classification\nenum TagType {\n  CHARACTER // Character traits, roles, occupations\n  STORY // Story genres, themes\n  ASSET // Visual assets, clothing, accessories\n  GAME // Game-related tags\n  MEDIA // Media types (anime, manga, etc.)\n  GENERAL // General classification tags\n}\n\n// LoRA model from Civitai\nmodel Lora {\n  id String @id @default(uuid())\n\n  // Civitai integration\n  civitaiModelId   String?\n  civitaiVersionId String? @unique\n\n  // Metadata\n  name          String\n  modelType     String? // e.g., \"LORA\", \"Checkpoint\", etc.\n  baseModel     String? // e.g., \"SD 1.5\", \"SDXL\", etc.\n  downloadCount Int?     @default(0)\n  modelUrl      String?\n  tags          String[] // Civitai tags\n  trainedWords  String[] // Trigger words for the LoRA\n  nsfw          Boolean  @default(false)\n\n  // File information\n  filename         String?\n  filepathRelative String?\n  firstImageUrl    String?\n  imageUrls        String[]\n\n  // Internal categorization\n  category String?\n  term     String?\n  deleted  Boolean @default(false)\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  characters Character[]\n\n  @@index([civitaiModelId])\n  @@index([civitaiVersionId])\n  @@index([deleted])\n}\n\n// Attire (clothing/appearance system)\nmodel Attire {\n  id          String  @id @default(uuid())\n  name        String\n  description String?\n  gender      String? // \"male\", \"female\", \"unisex\"\n\n  // Prompt components for image generation\n  promptHead String? // Head/face appearance prompts\n  promptBody String? // Body/clothing prompts\n  promptFull String? // Full combined prompt\n\n  previewImageUrl      String?\n  originalLanguageCode String?\n\n  // Ownership and visibility\n  visibility Visibility @default(PRIVATE)\n  userId     String\n  owner      User       @relation(\"AttireCreator\", fields: [userId], references: [id], onDelete: Cascade)\n\n  // Content classification\n  ageRating   AgeRating    @default(L)\n  contentTags ContentTag[]\n\n  // Translation versioning\n  contentVersion Int @default(1) // Increments when translatable content changes\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  charactersUsingAsMain Character[] @relation(\"CharacterMainAttire\")\n  characters            Character[] @relation(\"CharacterAttires\")\n\n  @@index([userId])\n  @@index([visibility])\n  @@index([ageRating])\n}\n\n// Tag system for categorization\nmodel Tag {\n  id          String  @id @default(uuid())\n  name        String // Tag name in English (used for search/filtering)\n  description String? @db.Text // Description of the tag\n  type        TagType // What this tag classifies (character, story, asset, etc.)\n\n  // Content classification (mandatory age rating)\n  ageRating AgeRating @default(L) // Minimum age rating required\n\n  // Optional content warnings (can be multiple)\n  contentTags ContentTag[] // Additional content warnings (violence, nudity, etc.)\n\n  // Translation and metadata\n  originalLanguageCode String? // Language code if translated from another language\n  weight               Int     @default(1) // Priority/importance weight\n\n  // Search optimization - denormalized for faster queries\n  searchable Boolean @default(true) // Whether this tag appears in searches\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  characters Character[]\n  stories    Story[]\n\n  @@unique([name, type]) // Same tag name can exist for different types\n  @@index([type])\n  @@index([ageRating])\n  @@index([searchable])\n}\n\n// Character model (full implementation)\nmodel Character {\n  id String @id @default(uuid())\n\n  // Basic information\n  firstName String\n  lastName  String?\n  age       Int?\n  gender    String? // \"male\", \"female\", \"non-binary\", etc.\n  species   String? // \"human\", \"elf\", \"robot\", etc.\n  style     VisualStyle? @default(ANIME) // Visual art style preference\n  reference String? // Source reference (e.g., \"One Piece\", \"Marvel Comics\")\n\n  // Visual and descriptive\n  physicalCharacteristics String? @db.Text // Physical appearance description\n  personality             String? @db.Text // Personality traits\n  history                 String? @db.Text // Background/backstory\n\n  // Configuration\n  visibility           Visibility @default(PUBLIC)\n  isSystemCharacter    Boolean    @default(false) // System characters are hidden from users (e.g., narrator)\n  originalLanguageCode String?\n\n  // Content classification\n  ageRating   AgeRating    @default(L)\n  contentTags ContentTag[]\n\n  // Ownership\n  userId  String\n  creator User   @relation(\"CharacterCreator\", fields: [userId], references: [id], onDelete: Cascade)\n\n  // LoRA and Attire associations\n  loraId String?\n  lora   Lora?   @relation(fields: [loraId], references: [id], onDelete: SetNull)\n\n  mainAttireId String?\n  mainAttire   Attire? @relation(\"CharacterMainAttire\", fields: [mainAttireId], references: [id], onDelete: SetNull)\n\n  // Translation versioning\n  contentVersion Int @default(1) // Increments when translatable content changes\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  stories  Story[]\n  attires  Attire[]           @relation(\"CharacterAttires\")\n  tags     Tag[]\n  stickers CharacterSticker[]\n  images   CharacterImage[]\n\n  // Chat system relations\n  assistantsUsingAsDefault   Assistant[]               @relation(\"AssistantDefaultCharacter\")\n  actingParticipations       ConversationParticipant[] @relation(\"ParticipantActingCharacter\")\n  representingParticipations ConversationParticipant[] @relation(\"ParticipantRepresentingCharacter\")\n\n  @@index([userId])\n  @@index([visibility])\n  @@index([isSystemCharacter])\n  @@index([ageRating])\n  @@index([loraId])\n  @@index([mainAttireId])\n}\n\n// Character stickers (emotion/action images)\nmodel CharacterSticker {\n  id          String    @id @default(uuid())\n  characterId String\n  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade)\n\n  emotionTag String?\n  actionTag  String?\n  imageUrl   String?\n  promptUsed String?       @db.Text\n  status     StickerStatus @default(PENDING)\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@index([characterId])\n  @@index([status])\n}\n\n// Character images with per-image content classification\nmodel CharacterImage {\n  id          String    @id @default(uuid())\n  characterId String\n  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade)\n\n  type        ImageType\n  url         String\n  key         String?\n  width       Int?\n  height      Int?\n  sizeBytes   Int?\n  contentType String?\n\n  // Per-image classification\n  ageRating   AgeRating    @default(L)\n  contentTags ContentTag[] @default([])\n  description String?      @db.Text\n\n  // Active image flag - only one active per type per character\n  isActive Boolean @default(false)\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@index([characterId])\n  @@index([type])\n  @@index([ageRating])\n  @@index([characterId, type, isActive])\n}\n\nmodel Story {\n  id          String       @id @default(uuid())\n  title       String\n  synopsis    String?      @db.Text\n  initialText String?      @db.Text\n  coverImage  String?\n  objectives  Json?\n  authorId    String\n  author      User         @relation(\"StoryAuthor\", fields: [authorId], references: [id], onDelete: Cascade)\n  characters  Character[]\n  tags        Tag[]\n  ageRating   AgeRating    @default(L)\n  contentTags ContentTag[]\n  visibility  Visibility   @default(PRIVATE)\n\n  // Translation versioning\n  contentVersion       Int     @default(1) // Increments when translatable content changes\n  originalLanguageCode String? // ISO 639-1 code of original language\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  conversations Conversation[]\n\n  @@index([authorId])\n  @@index([visibility])\n}\n\n// ============================================================================\n// CHAT SYSTEM MODELS (Phase 2)\n// ============================================================================\n\n// Assistant represents an AI agent with specific instructions and personality\n// It can act in conversations representing a Character\nmodel Assistant {\n  id          String  @id @default(uuid())\n  name        String\n  description String? @db.Text\n\n  // System prompt / instructions that define the assistant's behavior\n  instructions String @db.Text\n\n  // Default character this assistant represents (optional)\n  defaultCharacterId String?\n  defaultCharacter   Character? @relation(\"AssistantDefaultCharacter\", fields: [defaultCharacterId], references: [id], onDelete: SetNull)\n\n  // Visibility\n  visibility Visibility @default(PRIVATE)\n\n  // Ownership\n  userId  String\n  creator User   @relation(\"UserAssistants\", fields: [userId], references: [id], onDelete: Cascade)\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Relations\n  participations ConversationParticipant[] @relation(\"ParticipantAssistant\")\n\n  @@index([userId])\n  @@index([visibility])\n  @@index([defaultCharacterId])\n}\n\n// Conversation represents a chat session between user and characters\nmodel Conversation {\n  id    String @id @default(uuid())\n  title String @default(\"New Conversation\") // Topic/title of the conversation\n\n  // Title edit tracking\n  isTitleUserEdited   Boolean @default(false)\n  isTitleSystemEdited Boolean @default(false)\n\n  // Optional: link conversation to a project (for future use)\n  projectId String?\n\n  // Optional: link conversation to a story\n  story   Story?  @relation(fields: [storyId], references: [id])\n  storyId String?\n\n  // Settings stored as JSON (LLM preferences, roleplay settings, etc.)\n  settings Json? // Will store: { view, llm_settings, roleplay_specific, etc. }\n\n  // Timestamps\n  lastMessageAt       DateTime? // Timestamp of last message (for sorting)\n  titleLastUpdatedAt  DateTime? // When title was last changed\n  memoryLastUpdatedAt DateTime? // When conversation memory was last updated\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Ownership\n  userId String\n  owner  User   @relation(\"UserConversations\", fields: [userId], references: [id], onDelete: Cascade)\n\n  // Multi-user support\n  isMultiUser       Boolean @default(false)\n  maxUsers          Int     @default(1) // Limite de usuários humanos (1-4)\n  ownerUserId       String?\n  conversationOwner User?   @relation(\"ConversationOwner\", fields: [ownerUserId], references: [id])\n  allowUserInvites  Boolean @default(false) // Membros podem convidar?\n  requireApproval   Boolean @default(false) // Owner precisa aprovar joins?\n\n  // Relations\n  participants ConversationParticipant[]\n  messages     Message[]\n  memories     ConversationMemory[]\n  members      UserConversationMembership[]\n\n  @@index([userId])\n  @@index([ownerUserId])\n  @@index([isMultiUser])\n  @@index([lastMessageAt])\n  @@index([projectId])\n  @@index([storyId])\n}\n\n// Sender type for messages\nenum SenderType {\n  USER\n  CHARACTER\n  ASSISTANT\n  SYSTEM\n}\n\n// Membership roles for multi-user conversations\nenum MembershipRole {\n  OWNER // Criador, controle total\n  MODERATOR // Pode kick, mute, invite\n  MEMBER // Pode enviar mensagens\n  VIEWER // Read-only\n}\n\n// User membership in multi-user conversations\nmodel UserConversationMembership {\n  id             String       @id @default(uuid())\n  conversationId String\n  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)\n  userId         String\n  user           User         @relation(\"ConversationMemberships\", fields: [userId], references: [id], onDelete: Cascade)\n\n  // Role and permissions\n  role        MembershipRole @default(MEMBER)\n  canWrite    Boolean        @default(true) // Pode enviar mensagens?\n  canInvite   Boolean        @default(false) // Pode convidar outros?\n  canModerate Boolean        @default(false) // Pode kick/mute?\n\n  // Membership metadata\n  joinedAt  DateTime @default(now())\n  invitedBy String?\n  inviter   User?    @relation(\"SentInvites\", fields: [invitedBy], references: [id])\n  isActive  Boolean  @default(true) // false = kicked/left\n\n  @@unique([conversationId, userId])\n  @@index([userId])\n  @@index([conversationId])\n  @@index([role])\n  @@index([isActive])\n}\n\n// ConversationParticipant represents an entity participating in a conversation\n// Can be: User, Character (acting directly), or Assistant (acting as a character)\nmodel ConversationParticipant {\n  id             String       @id @default(uuid())\n  conversationId String\n  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)\n\n  // XOR constraint: Exactly ONE of these must be set\n  // Option 1: Human user participating\n  userId String?\n  user   User?   @relation(\"UserParticipations\", fields: [userId], references: [id], onDelete: Cascade)\n\n  // Option 2: Character acting directly (no AI logic, simple responses)\n  actingCharacterId String?\n  actingCharacter   Character? @relation(\"ParticipantActingCharacter\", fields: [actingCharacterId], references: [id], onDelete: Cascade)\n\n  // Option 3: Assistant (AI) acting in the conversation\n  actingAssistantId String?\n  actingAssistant   Assistant? @relation(\"ParticipantAssistant\", fields: [actingAssistantId], references: [id], onDelete: Cascade)\n\n  // The character being visually represented (appearance, name, etc.)\n  // Required when actingAssistantId is set\n  representingCharacterId String?\n  representingCharacter   Character? @relation(\"ParticipantRepresentingCharacter\", fields: [representingCharacterId], references: [id], onDelete: SetNull)\n\n  // Optional: JSON config override for this specific participant in this conversation\n  configOverride String? @db.Text // JSON string\n\n  joinedAt DateTime @default(now())\n\n  @@index([conversationId])\n  @@index([userId])\n  @@index([actingCharacterId])\n  @@index([actingAssistantId])\n  @@index([representingCharacterId])\n  @@index([conversationId, actingCharacterId])\n  @@index([conversationId, actingAssistantId])\n}\n\n// Message represents a single message in a conversation\nmodel Message {\n  id             String       @id @default(uuid())\n  conversationId String\n  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)\n\n  // Sender identification\n  senderId   String // ID of the sender (User, Character, or Assistant)\n  senderType SenderType // Type of sender\n\n  // Content\n  content String @db.Text // Message content (can be JSON for rich content)\n\n  // Optional: Attachments (image URLs, file URLs, etc.)\n  attachments String? @db.Text // JSON array of attachment URLs\n\n  // Metadata (can store additional info like emotion, action, etc.)\n  metadata Json? // Flexible metadata field\n\n  timestamp DateTime @default(now())\n\n  @@index([conversationId])\n  @@index([senderId])\n  @@index([conversationId, timestamp])\n}\n\n// ============================================================================\n// FAVORITES SYSTEM\n// ============================================================================\n\n// FavoriteCharacter represents a user's favorite character\nmodel FavoriteCharacter {\n  id String @id @default(uuid())\n\n  userId String\n  user   User   @relation(\"UserFavoriteCharacters\", fields: [userId], references: [id], onDelete: Cascade)\n\n  characterId String\n  // Note: We don't add a relation to Character model to avoid circular dependency issues\n  // The characterId is validated at the service level\n\n  createdAt DateTime @default(now())\n\n  @@unique([userId, characterId]) // A user can favorite a character only once\n  @@index([userId])\n  @@index([characterId])\n}\n\n// ============================================================================\n// TRANSLATION SYSTEM FOR USER-GENERATED CONTENT\n// ============================================================================\n\n// Translation status for content translations\nenum TranslationStatus {\n  PENDING // Translation in progress\n  ACTIVE // Translation active and available\n  OUTDATED // Original content was updated\n  FAILED // Translation failed\n  REVIEWED // Reviewed by human moderator\n}\n\n// ContentTranslation stores translations of user-generated content\n// Uses polymorphic pattern to support multiple content types\nmodel ContentTranslation {\n  id String @id @default(uuid())\n\n  // Polymorphic identification (contentType + contentId pattern)\n  contentType String // \"Character\", \"Story\", \"Attire\", \"Tag\", etc.\n  contentId   String // ID of the content being translated\n  fieldName   String // Field being translated: \"personality\", \"description\", etc.\n\n  // Languages\n  originalLanguageCode String // ISO 639-1: \"pt-BR\", \"en-US\", etc.\n  targetLanguageCode   String // Target language code\n  originalText         String @db.Text // Original text (for cache/validation)\n  translatedText       String @db.Text // Translated text\n\n  // Translation metadata\n  translationProvider String? // \"gemini\", \"openai\", \"grok\", \"human\"\n  translationModel    String? // Model used: \"gemini-2.5-flash-lite\", etc.\n  confidence          Float? // Confidence score (0-1)\n\n  // Quality control\n  status     TranslationStatus @default(ACTIVE)\n  reviewedBy String? // UserID of reviewer (if human reviewed)\n  reviewedAt DateTime?\n\n  // Performance metrics\n  translationTimeMs Int? // Translation time in milliseconds\n  characterCount    Int? // Number of characters translated\n\n  // Versioning (to detect when original content changes)\n  sourceVersion Int @default(1) // Version of the source content\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Optimized indexes for ultra-fast lookup\n  @@unique([contentType, contentId, fieldName, targetLanguageCode])\n  @@index([contentType, contentId])\n  @@index([targetLanguageCode])\n  @@index([status])\n  @@index([originalLanguageCode, targetLanguageCode])\n}\n\n// ============================================================================\n// CONVERSATION MEMORY SYSTEM\n// ============================================================================\n\n// Stores compressed summaries of old conversation messages to reduce context size\nmodel ConversationMemory {\n  id             String       @id @default(uuid())\n  conversationId String\n  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)\n\n  // Memory content\n  summary      String @db.Text // Resumo em prosa das mensagens compactadas\n  keyEvents    Json // Array de eventos importantes estruturados\n  messageCount Int // Quantas mensagens foram resumidas neste snapshot\n\n  // Range of messages summarized\n  startMessageId String? // ID da primeira mensagem resumida\n  endMessageId   String? // ID da última mensagem resumida\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@index([conversationId])\n  @@index([createdAt])\n}\n\n// ============================================================================\n// CREDIT AND SUBSCRIPTION SYSTEM\n// ============================================================================\n\n// Credit transactions log\nmodel CreditTransaction {\n  id                String                @id @default(uuid())\n  userId            String\n  user              User                  @relation(\"UserCreditTransactions\", fields: [userId], references: [id], onDelete: Cascade)\n  transactionType   CreditTransactionType\n  amountCredits     Float\n  balanceAfter      Float?\n  notes             String?\n  relatedUsageLogId String?\n  relatedPlanId     String?\n  timestamp         DateTime              @default(now())\n\n  @@index([userId])\n  @@index([userId, timestamp])\n  @@index([transactionType])\n  @@index([timestamp])\n}\n\n// Subscription plans\nmodel Plan {\n  id              String     @id @default(uuid())\n  tier            PlanTier   @unique\n  name            String\n  priceMonthly    Float\n  creditsPerMonth Int\n  description     String?\n  features        Json?\n  isActive        Boolean    @default(true)\n  createdAt       DateTime   @default(now())\n  updatedAt       DateTime   @updatedAt\n  paypalPlanId    String?    @unique\n  userPlans       UserPlan[] @relation(\"PlanSubscriptions\")\n\n  @@index([tier])\n  @@index([isActive])\n}\n\n// Service credit costs configuration\nmodel ServiceCreditCost {\n  id                String   @id @default(uuid())\n  serviceIdentifier String   @unique\n  creditsPerUnit    Float\n  unitDescription   String\n  isActive          Boolean  @default(true)\n  createdAt         DateTime @default(now())\n  updatedAt         DateTime @updatedAt\n\n  @@index([serviceIdentifier])\n  @@index([isActive])\n}\n\n// Usage logs for tracking service consumption\nmodel UsageLog {\n  id                  String    @id @default(uuid())\n  userId              String\n  user                User      @relation(\"UserUsageLogs\", fields: [userId], references: [id], onDelete: Cascade)\n  conversationId      String?\n  serviceType         String // Service identifier (e.g., \"llm_chat_safe\", \"image_generation\")\n  providerName        String? // Provider (e.g., \"openai\", \"gemini\")\n  modelName           String? // Model name (e.g., \"gpt-4\", \"gemini-2.0-flash-exp\")\n  inputTokens         Int?\n  outputTokens        Int?\n  charactersProcessed Int? // For TTS/STT services\n  imagesProcessed     Int?\n  costUsd             Float? // Cost in USD from provider\n  creditsConsumed     Float?\n  additionalMetadata  Json? // Additional metadata\n  processed           Boolean   @default(false)\n  processedAt         DateTime?\n  timestamp           DateTime  @default(now())\n\n  @@index([userId])\n  @@index([userId, processed])\n  @@index([serviceType])\n  @@index([timestamp])\n  @@index([processed])\n  @@index([creditsConsumed]) // For filtering unprocessed logs (WHERE creditsConsumed IS NULL)\n}\n\n// Monthly credit balance tracking\nmodel UserMonthlyBalance {\n  id              String   @id @default(uuid())\n  userId          String\n  user            User     @relation(\"UserMonthlyBalances\", fields: [userId], references: [id], onDelete: Cascade)\n  monthStartDate  DateTime\n  startingBalance Float\n  creditsGranted  Float    @default(0)\n  creditsSpent    Float    @default(0)\n  endingBalance   Float\n  createdAt       DateTime @default(now())\n  updatedAt       DateTime @updatedAt\n\n  @@unique([userId, monthStartDate])\n  @@index([userId])\n  @@index([monthStartDate])\n}\n\n// User subscription to plans\nmodel UserPlan {\n  id                   String             @id @default(uuid())\n  userId               String\n  user                 User               @relation(\"UserSubscriptionPlans\", fields: [userId], references: [id], onDelete: Cascade)\n  planId               String\n  plan                 Plan               @relation(\"PlanSubscriptions\", fields: [planId], references: [id])\n  status               SubscriptionStatus @default(ACTIVE)\n  currentPeriodStart   DateTime\n  currentPeriodEnd     DateTime\n  cancelAtPeriodEnd    Boolean            @default(false)\n  canceledAt           DateTime?\n  createdAt            DateTime           @default(now())\n  updatedAt            DateTime           @updatedAt\n  lastCreditsGrantedAt DateTime?\n  paypalSubscriptionId String?            @unique\n\n  @@index([userId])\n  @@index([planId])\n  @@index([status])\n  @@index([currentPeriodEnd])\n  @@index([paypalSubscriptionId])\n}\n\n// Plus tier access grants (for admin-granted access)\nmodel UserPlusAccess {\n  id        String   @id @default(uuid())\n  userId    String\n  user      User     @relation(\"UserPlusAccessGrants\", fields: [userId], references: [id], onDelete: Cascade)\n  grantedBy String?\n  reason    String?\n  startDate DateTime\n  endDate   DateTime\n  isActive  Boolean  @default(true)\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@index([userId])\n  @@index([isActive])\n  @@index([endDate])\n}\n\n// ============================================================================\n// CREDIT AND SUBSCRIPTION ENUMS\n// ============================================================================\n\nenum CreditTransactionType {\n  GRANT_INITIAL\n  GRANT_PLAN\n  PURCHASE\n  CONSUMPTION\n  SYSTEM_REWARD\n  REFUND\n  ADJUSTMENT\n  REFERRAL_BONUS\n  PROMOTIONAL\n}\n\nenum PlanTier {\n  FREE\n  PLUS\n  PREMIUM\n}\n\nenum SubscriptionStatus {\n  ACTIVE\n  CANCELLED // British spelling to match code\n  EXPIRED\n  PAYMENT_FAILED\n}\n",
  "inlineSchemaHash": "80ed050e698593895dcce1561b7e6b371ced61f86191a97035f768a8c6eff613",
  "copyEngine": true
}
config.dirname = '/'

config.runtimeDataModel = JSON.parse("{\"models\":{\"User\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"provider\",\"kind\":\"enum\",\"type\":\"AuthProvider\"},{\"name\":\"providerAccountId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"username\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"email\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"displayName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"fullName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"avatarUrl\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"avatarSource\",\"kind\":\"enum\",\"type\":\"AvatarSource\"},{\"name\":\"avatarUpdatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"birthDate\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"gender\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"preferredLanguage\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"role\",\"kind\":\"enum\",\"type\":\"UserRole\"},{\"name\":\"lastLoginAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"maxAgeRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"blockedTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"createdCharacters\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterCreator\"},{\"name\":\"stories\",\"kind\":\"object\",\"type\":\"Story\",\"relationName\":\"StoryAuthor\"},{\"name\":\"createdAttires\",\"kind\":\"object\",\"type\":\"Attire\",\"relationName\":\"AttireCreator\"},{\"name\":\"assistants\",\"kind\":\"object\",\"type\":\"Assistant\",\"relationName\":\"UserAssistants\"},{\"name\":\"conversations\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"UserConversations\"},{\"name\":\"conversationParticipations\",\"kind\":\"object\",\"type\":\"ConversationParticipant\",\"relationName\":\"UserParticipations\"},{\"name\":\"ownedConversations\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationOwner\"},{\"name\":\"memberships\",\"kind\":\"object\",\"type\":\"UserConversationMembership\",\"relationName\":\"ConversationMemberships\"},{\"name\":\"sentInvites\",\"kind\":\"object\",\"type\":\"UserConversationMembership\",\"relationName\":\"SentInvites\"},{\"name\":\"favoriteCharacters\",\"kind\":\"object\",\"type\":\"FavoriteCharacter\",\"relationName\":\"UserFavoriteCharacters\"},{\"name\":\"creditTransactions\",\"kind\":\"object\",\"type\":\"CreditTransaction\",\"relationName\":\"UserCreditTransactions\"},{\"name\":\"usageLogs\",\"kind\":\"object\",\"type\":\"UsageLog\",\"relationName\":\"UserUsageLogs\"},{\"name\":\"monthlyBalances\",\"kind\":\"object\",\"type\":\"UserMonthlyBalance\",\"relationName\":\"UserMonthlyBalances\"},{\"name\":\"userPlans\",\"kind\":\"object\",\"type\":\"UserPlan\",\"relationName\":\"UserSubscriptionPlans\"},{\"name\":\"plusAccessGrants\",\"kind\":\"object\",\"type\":\"UserPlusAccess\",\"relationName\":\"UserPlusAccessGrants\"}],\"dbName\":null},\"ContentClassification\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"reason\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"contentType\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"contentId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"autoClassified\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"reviewedBy\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"reviewedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Lora\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"civitaiModelId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"civitaiVersionId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"modelType\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"baseModel\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"downloadCount\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"modelUrl\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"tags\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"trainedWords\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"nsfw\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"filename\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"filepathRelative\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"firstImageUrl\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"imageUrls\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"category\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"term\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"deleted\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"characters\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterToLora\"}],\"dbName\":null},\"Attire\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"gender\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"promptHead\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"promptBody\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"promptFull\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"previewImageUrl\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"originalLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"visibility\",\"kind\":\"enum\",\"type\":\"Visibility\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"owner\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"AttireCreator\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"contentVersion\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"charactersUsingAsMain\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterMainAttire\"},{\"name\":\"characters\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterAttires\"}],\"dbName\":null},\"Tag\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"type\",\"kind\":\"enum\",\"type\":\"TagType\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"originalLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"weight\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"searchable\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"characters\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterToTag\"},{\"name\":\"stories\",\"kind\":\"object\",\"type\":\"Story\",\"relationName\":\"StoryToTag\"}],\"dbName\":null},\"Character\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"firstName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"lastName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"age\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"gender\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"species\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"style\",\"kind\":\"enum\",\"type\":\"VisualStyle\"},{\"name\":\"reference\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"physicalCharacteristics\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"personality\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"history\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"visibility\",\"kind\":\"enum\",\"type\":\"Visibility\"},{\"name\":\"isSystemCharacter\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"originalLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"creator\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"CharacterCreator\"},{\"name\":\"loraId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"lora\",\"kind\":\"object\",\"type\":\"Lora\",\"relationName\":\"CharacterToLora\"},{\"name\":\"mainAttireId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"mainAttire\",\"kind\":\"object\",\"type\":\"Attire\",\"relationName\":\"CharacterMainAttire\"},{\"name\":\"contentVersion\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"stories\",\"kind\":\"object\",\"type\":\"Story\",\"relationName\":\"CharacterToStory\"},{\"name\":\"attires\",\"kind\":\"object\",\"type\":\"Attire\",\"relationName\":\"CharacterAttires\"},{\"name\":\"tags\",\"kind\":\"object\",\"type\":\"Tag\",\"relationName\":\"CharacterToTag\"},{\"name\":\"stickers\",\"kind\":\"object\",\"type\":\"CharacterSticker\",\"relationName\":\"CharacterToCharacterSticker\"},{\"name\":\"images\",\"kind\":\"object\",\"type\":\"CharacterImage\",\"relationName\":\"CharacterToCharacterImage\"},{\"name\":\"assistantsUsingAsDefault\",\"kind\":\"object\",\"type\":\"Assistant\",\"relationName\":\"AssistantDefaultCharacter\"},{\"name\":\"actingParticipations\",\"kind\":\"object\",\"type\":\"ConversationParticipant\",\"relationName\":\"ParticipantActingCharacter\"},{\"name\":\"representingParticipations\",\"kind\":\"object\",\"type\":\"ConversationParticipant\",\"relationName\":\"ParticipantRepresentingCharacter\"}],\"dbName\":null},\"CharacterSticker\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"characterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"character\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterToCharacterSticker\"},{\"name\":\"emotionTag\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"actionTag\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"imageUrl\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"promptUsed\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"status\",\"kind\":\"enum\",\"type\":\"StickerStatus\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CharacterImage\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"characterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"character\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterToCharacterImage\"},{\"name\":\"type\",\"kind\":\"enum\",\"type\":\"ImageType\"},{\"name\":\"url\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"key\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"width\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"height\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"sizeBytes\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"contentType\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"isActive\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Story\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"synopsis\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"initialText\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"coverImage\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"objectives\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"authorId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"author\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"StoryAuthor\"},{\"name\":\"characters\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"CharacterToStory\"},{\"name\":\"tags\",\"kind\":\"object\",\"type\":\"Tag\",\"relationName\":\"StoryToTag\"},{\"name\":\"ageRating\",\"kind\":\"enum\",\"type\":\"AgeRating\"},{\"name\":\"contentTags\",\"kind\":\"enum\",\"type\":\"ContentTag\"},{\"name\":\"visibility\",\"kind\":\"enum\",\"type\":\"Visibility\"},{\"name\":\"contentVersion\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"originalLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"conversations\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationToStory\"}],\"dbName\":null},\"Assistant\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"instructions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"defaultCharacterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"defaultCharacter\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"AssistantDefaultCharacter\"},{\"name\":\"visibility\",\"kind\":\"enum\",\"type\":\"Visibility\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"creator\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserAssistants\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"participations\",\"kind\":\"object\",\"type\":\"ConversationParticipant\",\"relationName\":\"ParticipantAssistant\"}],\"dbName\":null},\"Conversation\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"isTitleUserEdited\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"isTitleSystemEdited\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"projectId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"story\",\"kind\":\"object\",\"type\":\"Story\",\"relationName\":\"ConversationToStory\"},{\"name\":\"storyId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"settings\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"lastMessageAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"titleLastUpdatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"memoryLastUpdatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"owner\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserConversations\"},{\"name\":\"isMultiUser\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"maxUsers\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"ownerUserId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversationOwner\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ConversationOwner\"},{\"name\":\"allowUserInvites\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"requireApproval\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"participants\",\"kind\":\"object\",\"type\":\"ConversationParticipant\",\"relationName\":\"ConversationToConversationParticipant\"},{\"name\":\"messages\",\"kind\":\"object\",\"type\":\"Message\",\"relationName\":\"ConversationToMessage\"},{\"name\":\"memories\",\"kind\":\"object\",\"type\":\"ConversationMemory\",\"relationName\":\"ConversationToConversationMemory\"},{\"name\":\"members\",\"kind\":\"object\",\"type\":\"UserConversationMembership\",\"relationName\":\"ConversationToUserConversationMembership\"}],\"dbName\":null},\"UserConversationMembership\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversationId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversation\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationToUserConversationMembership\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ConversationMemberships\"},{\"name\":\"role\",\"kind\":\"enum\",\"type\":\"MembershipRole\"},{\"name\":\"canWrite\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"canInvite\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"canModerate\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"joinedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"invitedBy\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"inviter\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"SentInvites\"},{\"name\":\"isActive\",\"kind\":\"scalar\",\"type\":\"Boolean\"}],\"dbName\":null},\"ConversationParticipant\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversationId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversation\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationToConversationParticipant\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserParticipations\"},{\"name\":\"actingCharacterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"actingCharacter\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"ParticipantActingCharacter\"},{\"name\":\"actingAssistantId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"actingAssistant\",\"kind\":\"object\",\"type\":\"Assistant\",\"relationName\":\"ParticipantAssistant\"},{\"name\":\"representingCharacterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"representingCharacter\",\"kind\":\"object\",\"type\":\"Character\",\"relationName\":\"ParticipantRepresentingCharacter\"},{\"name\":\"configOverride\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"joinedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Message\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversationId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversation\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationToMessage\"},{\"name\":\"senderId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"senderType\",\"kind\":\"enum\",\"type\":\"SenderType\"},{\"name\":\"content\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"attachments\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"metadata\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"timestamp\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"FavoriteCharacter\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserFavoriteCharacters\"},{\"name\":\"characterId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"ContentTranslation\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"contentType\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"contentId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"fieldName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"originalLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"targetLanguageCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"originalText\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"translatedText\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"translationProvider\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"translationModel\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"confidence\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"status\",\"kind\":\"enum\",\"type\":\"TranslationStatus\"},{\"name\":\"reviewedBy\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"reviewedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"translationTimeMs\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"characterCount\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"sourceVersion\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"ConversationMemory\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversationId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"conversation\",\"kind\":\"object\",\"type\":\"Conversation\",\"relationName\":\"ConversationToConversationMemory\"},{\"name\":\"summary\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"keyEvents\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"messageCount\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"startMessageId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"endMessageId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CreditTransaction\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserCreditTransactions\"},{\"name\":\"transactionType\",\"kind\":\"enum\",\"type\":\"CreditTransactionType\"},{\"name\":\"amountCredits\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"balanceAfter\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"notes\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"relatedUsageLogId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"relatedPlanId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timestamp\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Plan\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"tier\",\"kind\":\"enum\",\"type\":\"PlanTier\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"priceMonthly\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"creditsPerMonth\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"features\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"isActive\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"paypalPlanId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userPlans\",\"kind\":\"object\",\"type\":\"UserPlan\",\"relationName\":\"PlanSubscriptions\"}],\"dbName\":null},\"ServiceCreditCost\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"serviceIdentifier\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"creditsPerUnit\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"unitDescription\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"isActive\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"UsageLog\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserUsageLogs\"},{\"name\":\"conversationId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"serviceType\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"providerName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"modelName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"inputTokens\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"outputTokens\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"charactersProcessed\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"imagesProcessed\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"costUsd\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"creditsConsumed\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"additionalMetadata\",\"kind\":\"scalar\",\"type\":\"Json\"},{\"name\":\"processed\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"processedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"timestamp\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"UserMonthlyBalance\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserMonthlyBalances\"},{\"name\":\"monthStartDate\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"startingBalance\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"creditsGranted\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"creditsSpent\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"endingBalance\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"UserPlan\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserSubscriptionPlans\"},{\"name\":\"planId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"plan\",\"kind\":\"object\",\"type\":\"Plan\",\"relationName\":\"PlanSubscriptions\"},{\"name\":\"status\",\"kind\":\"enum\",\"type\":\"SubscriptionStatus\"},{\"name\":\"currentPeriodStart\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"currentPeriodEnd\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"cancelAtPeriodEnd\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"canceledAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"lastCreditsGrantedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"paypalSubscriptionId\",\"kind\":\"scalar\",\"type\":\"String\"}],\"dbName\":null},\"UserPlusAccess\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserPlusAccessGrants\"},{\"name\":\"grantedBy\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"reason\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startDate\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endDate\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"isActive\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null}},\"enums\":{},\"types\":{}}")
defineDmmfProperty(exports.Prisma, config.runtimeDataModel)
config.engineWasm = {
  getRuntime: async () => require('./query_engine_bg.js'),
  getQueryEngineWasmModule: async () => {
    const loader = (await import('#wasm-engine-loader')).default
    const engine = (await loader).default
    return engine
  }
}
config.compilerWasm = undefined

config.injectableEdgeEnv = () => ({
  parsed: {
    DATABASE_URL: typeof globalThis !== 'undefined' && globalThis['DATABASE_URL'] || typeof process !== 'undefined' && process.env && process.env.DATABASE_URL || undefined
  }
})

if (typeof globalThis !== 'undefined' && globalThis['DEBUG'] || typeof process !== 'undefined' && process.env && process.env.DEBUG || undefined) {
  Debug.enable(typeof globalThis !== 'undefined' && globalThis['DEBUG'] || typeof process !== 'undefined' && process.env && process.env.DEBUG || undefined)
}

const PrismaClient = getPrismaClient(config)
exports.PrismaClient = PrismaClient
Object.assign(exports, Prisma)

